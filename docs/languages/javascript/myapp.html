<html>
<head>

    <!-- Load your state machine here -->
    <script src="lightbulb.js"></script>

    <!-- Define the callbacks you used in lightbulb.puml and instantiate the state machine -->
    <script>
        // The callback for the Off state. You can call it whatever you want
        // as long as it agrees with what you said in lightbulb.puml
        function enter_off() {
            document.querySelector('#bulb').textContent = "off";
        }

        // The callback for the On state.
        function enter_on() {
            document.querySelector('#bulb').textContent = "on";
        }

        // Instantiate the state machine but don't start it yet.
        var statemachine = new lightbulb();
    </script>
</head>

<!-- Start your statemachine after the html is done loading. -->
<!-- Otherwise document.querySelector('#bulb') will return null. -->
<!-- Starting the state machine runs the event loop to respond to events. -->
<body onload="statemachine.start()">
    <h1>Lightbulb example</h1>
    <p>Light: <span id="bulb"></span> </p>

    <!-- This button shows how to dispatch events to the state machine. -->
    <button onclick="statemachine.dispatchEvent(lightbulb.EventId.SWITCH)">Toggle switch</button>
</body>
</html>